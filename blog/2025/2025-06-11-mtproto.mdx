---
title: "–ö–∞–∫ —è –Ω–∞—Å—Ç—Ä–æ–∏–ª MTProxy –¥–ª—è Telegram —Å –¥–æ–º–µ–Ω–æ–º –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π —Ä–µ–∫–ª–∞–º—ã"
tags: [telegram, proxy, linux, self-hosting]
---
import GeoCheck from '/src/components/geocheck';

Telegram —á–∞—Å—Ç–æ –±–ª–æ–∫–∏—Ä—É—é—Ç, –æ—Å–æ–±–µ–Ω–Ω–æ –≤ –Ω–µ–∫–æ—Ç–æ—Ä—ã—Ö —Å—Ç—Ä–∞–Ω–∞—Ö. –ù–æ **MTProxy** ‚Äî –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π —Å–ø–æ—Å–æ–± –æ–±–æ–π—Ç–∏ —ç—Ç–æ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ –∏ –ø—Ä–∏ —ç—Ç–æ–º –ø–æ–ª—É—á–∏—Ç—å –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–ª—é—à–∫–∏: –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–æ–∂–Ω–æ —Ä–µ–∫–ª–∞–º–∏—Ä–æ–≤–∞—Ç—å —Å–≤–æ–π –∫–∞–Ω–∞–ª –ø—Ä—è–º–æ –≤ Telegram.

–í —ç—Ç–æ–º –ø–æ—Å—Ç–µ —è —Ä–∞—Å—Å–∫–∞–∂—É, –∫–∞–∫ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å MTProxy –Ω–∞ Linux-—Å–µ—Ä–≤–µ—Ä–µ, –ø–æ–¥–∫–ª—é—á–∏—Ç—å –∫ –Ω–µ–º—É –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è –∏ –≤–∫–ª—é—á–∏—Ç—å —Ä–µ–∫–ª–∞–º—É —Å –ø–æ–º–æ—â—å—é [@MTProxybot](https://t.me/MTProxybot). –í—Å—ë –ø—Ä–æ—Å—Ç–æ, —Å—Ç–∞–±–∏–ª—å–Ω–æ –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –∫–æ—Å—Ç—ã–ª–µ–π.
<!-- truncate -->

---
<GeoCheck region="RU">
## ‚ö° –ß—Ç–æ —Ç–∞–∫–æ–µ MTProxy?

**MTProxy** ‚Äî —ç—Ç–æ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π Telegram-–ø—Ä–æ–∫—Å–∏, –∏—Å–ø–æ–ª—å–∑—É—é—â–∏–π –ø—Ä–æ—Ç–æ–∫–æ–ª [MTProto](https://core.telegram.org/mtproto). –û–Ω —à–∏—Ñ—Ä—É–µ—Ç —Ç—Ä–∞—Ñ–∏–∫ –∏ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–¥–∫–ª—é—á–∞—Ç—å—Å—è –∫ Telegram –¥–∞–∂–µ –ø—Ä–∏ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞—Ö.

–ï—Å–ª–∏ —Ç—ã —Ö–æ—á–µ—à—å:

- –∏–º–µ—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π —Å—Ç–∞–±–∏–ª—å–Ω—ã–π –ø—Ä–æ–∫—Å–∏ –¥–ª—è —Å–µ–±—è –∏–ª–∏ –ø—Ä–æ–µ–∫—Ç–∞;
- –¥–µ–ª–∏—Ç—å—Å—è –∫—Ä–∞—Å–∏–≤–æ–π —Å—Å—ã–ª–∫–æ–π –≤–∏–¥–∞ `t.me/proxy?...`;
- —Ä–µ–∫–ª–∞–º–∏—Ä–æ–≤–∞—Ç—å Telegram-–∫–∞–Ω–∞–ª —á–µ—Ä–µ–∑ Telegram;

...—Ç–æ —ç—Ç–æ—Ç –≥–∞–π–¥ –¥–ª—è —Ç–µ–±—è.

---

## üåê –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

–ü–µ—Ä–µ–¥ —É—Å—Ç–∞–Ω–æ–≤–∫–æ–π —É–±–µ–¥–∏—Å—å, —á—Ç–æ:

- —É —Ç–µ–±—è –µ—Å—Ç—å **VPS —Å Linux** (Debian/Ubuntu);
- –æ—Ç–∫—Ä—ã—Ç —Ö–æ—Ç—è –±—ã –æ–¥–∏–Ω –ø–æ—Ä—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, `443`, `8888`, `8443` –∏–ª–∏ `7777`);
- –µ—Å–ª–∏ —Ö–æ—á–µ—à—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–¥–æ–º–µ–Ω**, –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω **TLS 1.3** (—Å–º. –Ω–∏–∂–µ);
- —É –¥–æ–º–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω A/AAAA-–∑–∞–ø–∏—Å—å –Ω–∞ IP —Ç–≤–æ–µ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞.

> ‚ùó **–í–∞–∂–Ω–æ:** MTProxy *–Ω–µ* –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç TLS 1.2 ‚Äî —Ç–æ–ª—å–∫–æ **TLS 1.3**. –£–±–µ–¥–∏—Å—å, —á—Ç–æ —Ç–≤–æ–π –ø—Ä–æ–∫—Å–∏—Ä—É—é—â–∏–π —Å–µ—Ä–≤–µ—Ä –µ–≥–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç.

---

## üõ†Ô∏è –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —Å–±–æ—Ä–∫–∞ MTProxy

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
apt update && apt install -y git curl build-essential libssl-dev zlib1g-dev
````

### 2. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ —Å–±–æ—Ä–∫–∞

```bash
cd /opt
git clone https://github.com/GetPageSpeed/MTProxy
cd MTProxy
make && cd objs/bin
```

–ï—Å–ª–∏ —Å–±–æ—Ä–∫–∞ –Ω–µ –ø—Ä–æ—à–ª–∞:

```bash
make clean && make && cd objs/bin
```

---

## üîë –ü–æ–ª—É—á–µ–Ω–∏–µ –∫–ª—é—á–µ–π Telegram

### 1. –°–µ–∫—Ä–µ—Ç –æ—Ç Telegram

```bash
curl -s https://core.telegram.org/getProxySecret -o proxy-secret
```

### 2. –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–æ–≤ Telegram

```bash
curl -s https://core.telegram.org/getProxyConfig -o proxy-multi.conf
```

### 3. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–≥–æ –∫–ª—é—á–∞ (user secret)

```bash
head -c 16 /dev/urandom | xxd -ps
```

> üí° –≠—Ç–æ—Ç –∫–ª—é—á –Ω—É–∂–µ–Ω –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –∫ –ø—Ä–æ–∫—Å–∏ –∏ —Å–æ–∑–¥–∞–Ω–∏—è —Å—Å—ã–ª–∫–∏.

---

## üß© –ù–∞—Å—Ç—Ä–æ–π–∫–∞ systemd-—Å–µ—Ä–≤–∏—Å–∞

–°–æ–∑–¥–∞—ë–º unit-—Ñ–∞–π–ª:

```bash
nano /etc/systemd/system/MTProxy.service
```

–ü—Ä–∏–º–µ—Ä —Å–æ–¥–µ—Ä–∂–∏–º–æ–≥–æ:

```ini
[Unit]
Description=MTProxy
After=network.target

[Service]
Type=simple
WorkingDirectory=/opt/MTProxy
ExecStart=/opt/MTProxy/objs/bin/mtproto-proxy -u nobody -p 8888 -H 7776 -S 57bb1a7508969a0bd205f054ae367106 --aes-pwd /opt/MTProxy/proxy-secret /opt/MTProxy/proxy-multi.conf -C 4000 -P <—Ç–≤–æ–π_—Ä–µ–∫–ª–∞–º–Ω—ã–π_—Ç–µ–≥>
Restart=on-failure
User=nobody
Group=nogroup
LimitNOFILE=65536

[Install]
WantedBy=multi-user.target
```

–î–∞–ª–µ–µ –∞–∫—Ç–∏–≤–∏—Ä—É–µ–º:

```bash
systemctl daemon-reload
systemctl enable --now MTProxy.service
systemctl status MTProxy.service
```

---

## üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

–ü—Ä–∏–º–µ—Ä —Å—Å—ã–ª–∫–∏:

```
https://t.me/proxy?server=proxy.example.com&port=7776&secret=57bb1a7508969a0bd205f054ae367106
```

> üß† –î–ª—è –ø–æ–≤—ã—à–µ–Ω–∏—è —É—Å—Ç–æ–π—á–∏–≤–æ—Å—Ç–∏ –∫ –±–ª–æ–∫–∏—Ä–æ–≤–∫–∞–º –¥–æ–±–∞–≤—å `dd` –ø–µ—Ä–µ–¥ –∫–ª—é—á–æ–º (`dd57bb1a...`) ‚Äî –≤–∫–ª—é—á–∏—Ç—Å—è **random padding**.

---

## üì£ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∫–ª–∞–º—ã –∫–∞–Ω–∞–ª–∞

Telegram –ø–æ–∑–≤–æ–ª—è–µ—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å –±–∞–Ω–Ω–µ—Ä —Å —Ç–≤–æ–∏–º –∫–∞–Ω–∞–ª–æ–º –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ —á–µ—Ä–µ–∑ MTProxy. –ß—Ç–æ–±—ã —ç—Ç–æ –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞—Ç—å:

1. –ü–µ—Ä–µ–π–¥–∏ –≤ [@MTProxybot](https://t.me/MTProxybot);
2. –ù–∞–∂–º–∏ `–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–∫—Å–∏`;
3. –í–≤–µ–¥–∏ IP-–∞–¥—Ä–µ—Å –∏ –ø–æ—Ä—Ç –ø—Ä–æ–∫—Å–∏;
4. –í–≤–µ–¥–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π secret;
5. –ü–æ–ª—É—á–∏ —Ä–µ–∫–ª–∞–º–Ω—ã–π —Ç–µ–≥;
6. –£–∫–∞–∂–∏ –µ–≥–æ –≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–µ `-P` systemd-—Ñ–∞–π–ª–∞.

–†–µ–∫–ª–∞–º–Ω—ã–π –±–∞–Ω–Ω–µ—Ä –±—É–¥–µ—Ç –ø–æ–∫–∞–∑–∞–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏ –∫ –ø—Ä–æ–∫—Å–∏ ‚Äî –¥–∞–∂–µ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –≤—Ö–æ–¥–µ.

---

## üåê –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –¥–æ–º–µ–Ω –∏ TLS 1.3

### –ß—Ç–æ –Ω—É–∂–Ω–æ:

* –î–æ–º–µ–Ω–Ω–æ–µ –∏–º—è, –Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞;
* TLS-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, –æ—Ç Let's Encrypt);
* –ü—Ä–æ–∫—Å–∏-—Å–µ—Ä–≤–µ—Ä (NGINX, Caddy) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π TLS 1.3;
* –ü—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ **–≤ TCP**, –Ω–µ –≤ HTTP.

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ NGINX:

```nginx
server {
    listen 443 ssl;
    server_name proxy.example.com;

    ssl_certificate     /etc/letsencrypt/live/proxy.example.com/fullchain.pem;
    ssl_certificate_key /etc/letsencrypt/live/proxy.example.com/privkey.pem;
    ssl_protocols TLSv1.3;
    ssl_prefer_server_ciphers on;

    location / {
        proxy_pass http://127.0.0.1:8888;
        proxy_protocol on;
    }
}
```

> ‚ö†Ô∏è –ò—Å–ø–æ–ª—å–∑—É–π `stream {}` –±–ª–æ–∫–∏ –¥–ª—è –Ω–∞—Å—Ç–æ—è—â–µ–π TCP-–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∫–∏, –µ—Å–ª–∏ —Ö–æ—á–µ—à—å —Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É.

---

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–í –∏—Ç–æ–≥–µ —É —Ç–µ–±—è –µ—Å—Ç—å:

* —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π, —Å—Ç–∞–±–∏–ª—å–Ω—ã–π MTProxy;
* –∫—Ä–∞—Å–∏–≤–∞—è —Å—Å—ã–ª–∫–∞ —Å –¥–æ–º–µ–Ω–æ–º –∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ–º;
* –ø–æ–¥–¥–µ—Ä–∂–∫–∞ random padding (`dd...`);
* –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ä–µ–∫–ª–∞–º–æ–π Telegram-–∫–∞–Ω–∞–ª–∞;
* –∏ –≤—Å—ë —ç—Ç–æ –±–µ—Å–ø–ª–∞—Ç–Ω–æ –∏ –ø–æ–¥ —Ç–≤–æ–∏–º –∫–æ–Ω—Ç—Ä–æ–ª–µ–º.

---

## üôã –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Cloudflare?

–ù–µ—Ç. MTProxy —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ —Å **—Ä–µ–∞–ª—å–Ω—ã–º TCP-–ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞–Ω–∏–µ–º**. Cloudflare –ø–æ–¥—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –¥–ª—è HTTP/HTTPS.

### MTProxy –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç, —Ö–æ—Ç—è –≤—Å—ë –Ω–∞—Å—Ç—Ä–æ–µ–Ω–æ?

* –ü—Ä–æ–≤–µ—Ä—å TLS 1.3 ‚Äî —ç—Ç–æ **—á–∞—Å—Ç–∞—è –ø—Ä–∏—á–∏–Ω–∞**.
* –£–±–µ–¥–∏—Å—å, —á—Ç–æ –¥–æ–º–µ–Ω —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ IP —Å–µ—Ä–≤–µ—Ä–∞.
* –ü—Ä–æ–≤–µ—Ä—å –ª–æ–≥–∏ `journalctl -u MTProxy`.

---

## üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏

* [–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Telegram –æ MTProxy](https://core.telegram.org/mtproto/mtproto-transports)
* [@MTProxybot –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ —Ç–µ–≥–æ–≤](https://t.me/MTProxybot)
* [–ü—Ä–æ–µ–∫—Ç GetPageSpeed/MTProxy –Ω–∞ GitHub](https://github.com/GetPageSpeed/MTProxy)

---
</GeoCheck>
> –ù–∞–¥–µ—é—Å—å, –≥–∞–π–¥ –æ–∫–∞–∑–∞–ª—Å—è –ø–æ–ª–µ–∑–Ω—ã–º. –ï—Å–ª–∏ —Ö–æ—á–µ—à—å –ø—Ä–æ—Å—Ç–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –º–æ–π –ø—Ä–æ–∫—Å–∏:
> üëâ [–ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è](https://t.me/proxy?server=swe1.cloudea.org&port=7776&secret=57bb1a7508969a0bd205f054ae367106)
